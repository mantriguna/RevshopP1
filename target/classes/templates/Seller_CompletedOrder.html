<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Seller - Received Orders</title>
    <link rel="icon" type="image/png" href="/Images/RevShop_1.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        body {
            background-color: white !important;
        }
        .order-card {
            margin: 10px;
            border: 1px solid goldenrod;
            border-radius: 5px;
            padding: 10px;
            width: 1100px !important;
            display: flex;
            flex-direction: row;
            align-items: center;
        }
        .product-img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            margin-right: 20px;
        }
        
        .order-details, .order-date-section {
            flex: 1;
            
        }
        .status {
            font-weight: bold;
        }
        .divider {
        width: 2px; /* Adjust width as needed */
        height: 80%; /* Height remains a percentage */
        background-color: #ddd; /* Visible color */
        margin: 0 15px; /* Margin for spacing */
    }
        .order-date-section p {
            margin: 0;
            color: #555;
            font-size: 0.9em;
        }
        .product-details {
            flex: 1;
            padding-right: 20px;
        }
        .max-discount {
            font-size: 0.9em;
            background-color: #CC0C39;
            color: white;
            padding: 5px 10px;
        }
        .ml-auto {
            margin-left: auto;
        }
        .cart-btn { 
            cursor: pointer; 
        }
        .hidden {
            display: none;
        }
        @media (max-width: 768px) {
            .cart-card {
                flex-direction: column;
                align-items: flex-start;
            }
            .product-img {
                margin-right: 0;
                margin-bottom: 10px;
            }
            .ml-auto {
                margin-left: 0;
                width: 100%;
                display: flex;
                justify-content: space-between;
            }
        }
        .cart-summary-box {
            border: 2px solid #ffd700;
            padding: 20px;
            border-radius: 10px;
            background-color: #fffaf0;
            margin-top: 20px;
            text-align: right;
        }
        .order-date-section p{
        margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div th:insert="~{Seller_navbar.html}"></div>

    <div class="container">
        <div class="row">
            <h2 class="my-4">Successful Orders</h2>
            <hr>
            <div class="col-12 d-flex flex-wrap justify-content-start" 
                 th:if="${orders != null and !#lists.isEmpty(orders)}" 
                 th:each="order : ${orders}">
                <!-- Ensure this block only displays if the order is not delivered -->
                <div th:if="${order.status == 'Delivered'}">
                    <div class="order-card">
                        <div class="image-container">
                            <img th:each="image : ${order.product.imageUrls}" 
                                 th:src="${image.imageUrl}" 
                                 alt="Product Image Thumbnail" 
                                 class="img-thumbnail product-img">
                        </div>
                        <div class="order-details">
                            <h5 th:text="${order.product.productName}" class="mb-1">Product Name</h5>
                            <p>Quantity: <span th:text="${order.quantity}">1</span></p>
                            <p>Price per Unit: ₹<span th:text="${#numbers.formatDecimal(order.price_per_unit, 1, 2)}">0.00</span></p>
                            <p>Total Paid: ₹<span th:text="${#numbers.formatDecimal(order.price_per_unit * order.quantity, 1, 2)}">0.00</span></p>
                            <p><b>Color: </b><span th:text="${order.color.colorName}">Default Color</span></p>
                        </div>
                        <div class="divider"></div>
                        <div class="order-date-section">
                        	<h5>Customer Details</h5>
                        	<hr>
                        	<p><b>Customer Name:&nbsp;</b><span th:text="${order.order.customer.name}">Customer Name</span></p>
                        	<p><b>Customer Phone Number:&nbsp;</b><span th:text="${order.order.customer.phoneNumber}">Customer Phone</span></p>
                            <p><b>Address:&nbsp;</b><span th:text="${order.order.delivery_address}">Customer Address</span></p>
                            <p><b>Status:&nbsp;</b><span class="status" th:text="${order.status}">Status</span></p>
                            <p><b>Order Date: </b><span th:text="${#dates.format(order.order.order_date, 'dd MMM yyyy')}">Order Date</span></p>
                            
                        </div>
                    </div>
                </div>
            </div>
            <div th:if="${orders == null or #lists.isEmpty(orders)}" class="text-center">
                <p>No orders found.</p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    document.querySelectorAll('.image-container').forEach(function(container) {
        const images = container.querySelectorAll('img');
        let currentImageIndex = 0;

        images.forEach((img, index) => {
            if (index !== currentImageIndex) {
                img.classList.add('hidden');
            }
        });

        setInterval(function() {
            images[currentImageIndex].classList.add('hidden');
            currentImageIndex = (currentImageIndex + 1) % images.length;
            images[currentImageIndex].classList.remove('hidden');
        }, 4000);
    });
    </script>
</body>
</html>
